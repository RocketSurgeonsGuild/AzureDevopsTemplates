parameters:
  Script: 'cakefile.cake'
  Target: 'Default'
  Configuration: 'Release'
  Coverage: '$(Agent.BuildDirectory)/c'
  Artifacts: $(Build.ArtifactStagingDirectory)
  Verbosity: 'Normal'

steps:
- task: DotNetCoreCLI@2
  displayName: 'dotnet cake bootstrap'
  inputs:
    command: custom
    custom: cake
    arguments: '${{ parameters.Script }} --bootstrap'

- task: DotNetCoreCLI@2
  displayName: 'dotnet cake'
  inputs:
    command: custom
    custom: cake
    arguments: '${{ parameters.Script }} --Target="${{ parameters.Target }}" --Configuration="${{ parameters.Configuration }}" --Artifacts="${{ parameters.Artifacts }}" --Coverage="${{ parameters.Coverage }}" --verbosity="${{ parameters.Verbosity }}"'
