parameters:
  NuGetVersion: "5.1.0"
  Artifacts: $(Build.ArtifactStagingDirectory)
  FeedId: ''
  Verbosity: 'Normal'
  AllowPackageConflicts: 'true'
  AccessToken: '$(System.AccessToken)'

steps:
  - task: NuGetToolInstaller@1
    displayName: "Get NuGet"
    inputs:
      versionSpec: ${{ parameters.NuGetVersion }}
  - task: NuGetCommand@2
    displayName: NuGet Push
    inputs:
      command: "push"
      packagesToPush: ${{ format('{0}/nuget/**/*.nupkg;!{0}/nuget/**/*.symbols.nupkg', parameters.Artifacts) }}
      feedPublish: ${{ parameters.FeedId }}
      verbosityPush: ${{ parameters.Verbosity }}
      allowPackageConflicts: ${{ parameters.AllowPackageConflicts }}
