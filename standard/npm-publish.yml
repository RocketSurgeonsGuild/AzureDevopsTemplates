parameters:
  Artifacts: "$(Build.ArtifactStagingDirectory)/npm/"

steps:
  - task: npmAuthenticate@0
    displayName: 'npm Authenticate .npmrc'
    inputs:
      workingFile: .npmrc
  - powershell: |
      foreach ($i in gci ${{ parameters.Artifacts }} -Filter *.tgz -Recurse) { npm publish $i.FullName; }
    displayName: 'Publish npm packages'
    condition: succeededOrFailed()
    continueOnError: true

