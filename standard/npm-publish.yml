parameters:
  Artifacts: "$(Build.ArtifactStagingDirectory)/npm/"

steps:
  - task: npmAuthenticate@0
    displayName: 'npm Authenticate .npmrc'
    inputs:
      workingFile: .npmrc
  - powershell: |
      foreach ($i in gci $ENV:NPM_ARTIFACTS -Filter *.tgz -Recurse) { npm publish $i.FullName; }
    displayName: 'Publish npm packages'
    env:
      NPM_ARTIFACTS: ${{ parameters.Artifacts }}
    condition: succeededOrFailed()
    continueOnError: true

